<html lang="en"><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Passworded Bars with Admin UI</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#7dd3fc;--glass:rgba(255,255,255,0.03)}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto}
    body{background:linear-gradient(180deg,#071023 0%, #071b2a 100%);color:#e6f0ff}
    .viewport{height:100vh;scroll-snap-type:y mandatory;overflow-y:scroll}
    section{height:100vh;display:flex;align-items:center;justify-content:center;scroll-snap-align:center;padding:2rem;box-sizing:border-box}
    .bar{width:min(900px,95%);background:var(--card);border-radius:16px;padding:28px;box-shadow:0 10px 30px rgba(2,6,23,0.6);backdrop-filter: blur(6px);}
    .bar h2{margin:0 0 8px 0;font-size:1.4rem}
    .controls{display:flex;gap:8px;align-items:center}
    .controls input{flex:1;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);background:var(--glass);color:inherit}
    .controls button{padding:10px 14px;border-radius:10px;border:0;background:var(--accent);color:#022;font-weight:600;cursor:pointer}
    .protected-text{margin-top:18px;display:none;background:rgba(255,255,255,0.05);padding:14px;border-radius:10px}
    .unlocked{display:block}
    .edit-btn{margin-top:10px;padding:6px 10px;border-radius:6px;background:#444;color:#eee;border:0;cursor:pointer;font-size:0.9rem}

    #adminPanel{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center}
    #adminPanel .panel{background:#0b1220;padding:20px;border-radius:14px;width:90%;max-width:420px}
    #adminPanel input, #adminPanel textarea{width:100%;padding:10px;margin:6px 0;border-radius:10px;border:1px solid #333;background:#111;color:#fff}
    #exportBtn{position:fixed;right:12px;bottom:12px;padding:10px 14px;border-radius:10px;background:var(--accent);color:#022;border:0;font-weight:700;cursor:pointer;display:none}

  </style>
</head>
<body>

<button id="enterAdmin" style="position:fixed;top:12px;right:12px;padding:8px 12px;border-radius:8px;border:0;background:#7dd3fc;color:#022;font-weight:700;cursor:pointer">Admin</button>
<button id="exportBtn" style="display: block;">Download Updated HTML</button>

<div class="viewport" id="viewport"><section><div class="bar">
      <h2>1985 <span class="locked-badge">Locked</span></h2>
      <div class="controls">
        <input type="password" placeholder="Enter password" class="pw-input">
        <button class="pw-btn">Unlock</button>
      </div>
      <div class="protected-text">Diary log 1
Hello. I am ***********
I have just joined this school. I do not know what goes on about here. The name of the school is ******** All my time here I've heard about some event that happened in 1985 around a year ago. Apparently it was serious enough to cause the school to shut down for months but I do not know what it was. The administration ignores me when I ask and the students act clueless, but I know something is going on. I have tried a lot and I'm feeling like it was either a student hurt or killed another student as I cannot think of anything else severe enough that it'd cause a school shutdown. I know it was a student because among the only things I have been told about the event, students being suspended is one of them.</div>
      <button class="edit-btn">Edit</button>
    </div></section><section><div class="bar">
      <h2>The Archives <span class="locked-badge">Locked</span></h2>
      <div class="controls">
        <input type="password" placeholder="Enter password" class="pw-input">
        <button class="pw-btn">Unlock</button>
      </div>
      <div class="protected-text">Hello. I am not at all certain about the fact that someone died here. But now I'am certain that someone is listening to me, to these texts I write. I have told my friend to get the contents of my diary onto a platform if I do not come to school for more than 20 days because I fear simply knowing is enough to warrant attention, and attention is dangerous if my theories are true. I cannot tell you everything all at once, he will figure it out and will be able to destroy this if I do. Instead I will help you with whatever hints or clues your getting, I hid them across the school. I do not know where my friend has put the contents of my diary. But I will put a way for you to know in my letter.</div>
      <button class="edit-btn">Edit</button>
    </div></section><section><div class="bar">
      <h2>The Clues <span class="locked-badge">Locked</span></h2>
      <div class="controls">
        <input type="password" placeholder="Enter password" class="pw-input">
        <button class="pw-btn">Unlock</button>
      </div>
      <div class="protected-text">How are you getting these hints.
Who are you.
W
W
W
W

W
w
I gave them
To
To **********

It's no surprise to me your recieving them.</div>
      <button class="edit-btn">Edit</button>
    </div></section></div>

<div id="adminPanel" style="display: none;">
  <div class="panel">
    <h3>Edit Bar</h3>
    <label>Title</label>
    <input id="editTitle">
    <label>Password</label>
    <input id="editPassword" type="password">
    <label>Protected Text</label>
    <textarea id="editText" rows="4"></textarea>
    <button id="saveEdit" style="margin-top:10px;background:#7dd3fc;color:#022;padding:10px;border-radius:10px;border:0;font-weight:700;cursor:pointer">Save</button>
    <button id="closeAdmin" style="margin-top:10px;background:#444;color:#eee;padding:10px;border-radius:10px;border:0;cursor:pointer">Cancel</button>
  </div>
</div>

<script>
// DEFAULT DATA
const defaultBars = [
  { title:"Secret Bar #1", password:"apple", text:"The quick brown fox jumps over the lazy dog." },
  { title:"Secret Bar #2", password:"banana", text:"Do not share this with strangers." },
  { title:"Secret Bar #3", password:"cherry", text:"Static demo with admin editing." }
];

// LOAD DATA FROM LOCAL STORAGE
let bars = JSON.parse(localStorage.getItem('bars-data') || 'null') || defaultBars;

// RENDER BARS
async function sha256hex(msg){
  const data = new TextEncoder().encode(msg);
  const hash = await crypto.subtle.digest('SHA-256', data);
  return Array.from(new Uint8Array(hash)).map(b=>b.toString(16).padStart(2,'0')).join('');
}

async function render(){
  const viewport = document.getElementById('viewport');
  viewport.innerHTML = '';

  for(let i=0;i<bars.length;i++){
    const bar = document.createElement('section');
    const content = document.createElement('div');
    content.className = 'bar';
    const hash = await sha256hex(bars[i].password);

    content.innerHTML = `
      <h2>${bars[i].title} <span class="locked-badge">Locked</span></h2>
      <div class="controls">
        <input type="password" placeholder="Enter password" class="pw-input" />
        <button class="pw-btn">Unlock</button>
      </div>
      <div class="protected-text">${bars[i].text}</div>
      <button class="edit-btn">Edit</button>
    `;

    // Unlock Logic
    const input = content.querySelector('.pw-input');
    const btn = content.querySelector('.pw-btn');
    const text = content.querySelector('.protected-text');
    const badge = content.querySelector('.locked-badge');

    btn.onclick = async ()=>{
      if(await sha256hex(input.value) === hash){
        text.classList.add('unlocked');
        badge.textContent = 'Unlocked';
      }
    };

    // Admin Edit Button
    content.querySelector('.edit-btn').onclick = ()=>{
      openAdmin(i);
    };

    bar.appendChild(content);
    viewport.appendChild(bar);
  }
}

render();

// ADMIN LOGIN
let adminUnlocked = false;

document.getElementById('enterAdmin').onclick = ()=>{
  const pw = prompt("Enter admin password:");
  if(pw === "admin123"){ // CHANGE THIS
    adminUnlocked = true;
    document.getElementById('exportBtn').style.display = 'block';
    alert("Admin mode enabled.");
  } else alert("Wrong password.");
};

// ADMIN EDIT PANEL
let editIndex = null;
function openAdmin(i){
  if(!adminUnlocked){ alert("Admin mode locked."); return; }
  editIndex = i;
  document.getElementById('editTitle').value = bars[i].title;
  document.getElementById('editPassword').value = bars[i].password;
  document.getElementById('editText').value = bars[i].text;
  document.getElementById('adminPanel').style.display = 'flex';
}

document.getElementById('closeAdmin').onclick = ()=>{
  document.getElementById('adminPanel').style.display = 'none';
};

document.getElementById('saveEdit').onclick = ()=>{
  bars[editIndex].title = document.getElementById('editTitle').value;
  bars[editIndex].password = document.getElementById('editPassword').value;
  bars[editIndex].text = document.getElementById('editText').value;
  localStorage.setItem('bars-data', JSON.stringify(bars));
  document.getElementById('adminPanel').style.display = 'none';
  render();
};

// EXPORT UPDATED HTML
function download(filename, text) {
  const element = document.createElement('a');
  element.setAttribute('href', 'data:text/html;charset=utf-8,' + encodeURIComponent(text));
  element.setAttribute('download', filename);
  document.body.appendChild(element);
  element.click();
  document.body.removeChild(element);
}

document.getElementById('exportBtn').onclick = ()=>{
  download("updated-site.html", document.documentElement.outerHTML);
};

</script>


</body></html>
