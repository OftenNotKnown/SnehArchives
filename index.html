<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>The Archives â€” CRT</title>
  <style>
    :root{
      --crt-blue:#0af;
      --bg:#000;
      --card:#020813;
      --accent:#0af;
      --glass:rgba(0,20,40,0.3);
    }

    html,body{height:100%;margin:0;font-family:"Courier New",monospace;background:var(--bg);color:var(--crt-blue);letter-spacing:0.4px}
    *{animation:none !important;transition:none !important}

    body::before{
      content:"";
      position:fixed;
      top:0;left:0;width:100%;height:100%;pointer-events:none;
      background:
        repeating-linear-gradient(to bottom,rgba(255,255,255,0.10) 0px,rgba(255,255,255,0.10) 1px,rgba(0,0,0,0) 3px,rgba(0,0,0,0) 6px),
        repeating-linear-gradient(to right,rgba(0,150,255,0.05) 0px,rgba(0,150,255,0.05) 1px,rgba(0,0,0,0) 2px,rgba(0,0,0,0) 4px);
      mix-blend-mode:screen;z-index:99999;
    }
    body::after{
      content:"";
      position:fixed;
      top:0;left:0;width:100%;height:100%;pointer-events:none;
      background:radial-gradient(circle at center,rgba(0,0,0,0) 50%,rgba(0,0,0,0.8) 100%);
      filter:blur(2px);
      z-index:99998;
    }
    .crt-vignette{position:fixed;inset:0;pointer-events:none;z-index:99992;background:radial-gradient(ellipse at center, rgba(255,255,255,0) 45%, rgba(0,0,0,0.5) 100%)}
    .crt-wrap{position:relative;width:100%;height:100%;overflow:hidden;display:flex;flex-direction:column}
    .crt-screen{
      transform:perspective(800px) translateZ(0);
      filter:contrast(1.05) saturate(1.05);
      padding:0;margin:0;min-height:100vh;
      display:flex;flex-direction:column;
    }
    .crt-text, .crt-text *{
      color:var(--crt-blue);
      text-shadow:0 0 6px rgba(10,175,255,0.95),1px 0 0 rgba(255,0,128,0.06),-1px 0 0 rgba(0,200,255,0.06);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    #splash{position:fixed;top:0;left:0;width:100%;height:100%;background:#000;display:flex;align-items:center;justify-content:center;flex-direction:column;z-index:99995}
    .splash-title{font-size:2.6rem;font-weight:700}
    .splash-sub{color:rgba(10,175,255,0.7);margin-top:8px;font-size:0.9rem}

    #lockscreen{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(180deg,#000,#00101a);display:flex;flex-direction:column;align-items:center;justify-content:center;font-family:"Courier New",monospace;z-index:99994}
    #lockText{font-size:1.1rem;margin-bottom:1rem}
    #lockInput{background:transparent;color:var(--crt-blue);border:1px solid rgba(10,175,255,0.5);padding:10px;width:260px;font-size:1rem;text-align:center}
    #lockBtn{margin-top:12px;background:transparent;color:var(--crt-blue);border:1px solid rgba(10,175,255,0.6);padding:10px 20px;cursor:pointer}

    .viewport{height:100vh;scroll-snap-type:y mandatory;overflow-y:scroll;display:none}
    section{height:100vh;display:flex;align-items:center;justify-content:center;scroll-snap-align:center;padding:2rem;box-sizing:border-box}
    .bar{width:min(900px,95%);background:linear-gradient(180deg, rgba(0,8,15,0.6), rgba(0,6,10,0.55));border-radius:6px;padding:24px;border:1px solid rgba(10,175,255,0.15);box-shadow:inset 0 0 60px rgba(10,175,255,0.03),0 0 40px rgba(10,175,255,0.04)}
    .bar h2{margin:0 0 8px 0;font-size:1.2rem;color:var(--crt-blue)}
    .controls{display:flex;gap:8px;align-items:center}
    .controls input{flex:1;padding:10px;border-radius:4px;border:1px solid rgba(10,175,255,0.12);background:transparent;color:var(--crt-blue)}
    .controls button{padding:10px 14px;border-radius:4px;border:1px solid rgba(10,175,255,0.15);background:transparent;color:var(--crt-blue);cursor:pointer}
    .protected-text{margin-top:18px;display:none;background:rgba(0,0,0,0.45);padding:14px;border-radius:4px;border:1px solid rgba(10,175,255,0.08)}
    .unlocked{display:block}
    .edit-btn{margin-top:10px;padding:6px 10px;border-radius:4px;background:transparent;color:var(--crt-blue);border:1px solid rgba(10,175,255,0.12);cursor:pointer;font-size:.9rem}

    #adminPanel{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.85);display:none;align-items:center;justify-content:center;color:var(--crt-blue)}
    #adminPanel .panel{background:linear-gradient(180deg,#000,#00101a);padding:20px;border-radius:6px;border:1px solid rgba(10,175,255,0.12);width:90%;max-width:420px}
    #adminPanel input,#adminPanel textarea{width:100%;padding:10px;margin:6px 0;border-radius:4px;border:1px solid rgba(10,175,255,0.12);background:transparent;color:var(--crt-blue)}

    #exportBtn{position:fixed;right:12px;bottom:12px;padding:10px 14px;border-radius:4px;background:transparent;border:1px solid rgba(10,175,255,0.12);color:var(--crt-blue);font-weight:700;cursor:pointer;display:none}

    .noise{position:fixed;inset:0;pointer-events:none;z-index:99993;background-image:linear-gradient(transparent, rgba(255,255,255,0.01));opacity:0.6;background-size:4px 4px;}

    @media (max-width:520px){.splash-title{font-size:1.6rem}.bar{padding:18px}}
  </style>
</head>
<body>
<div class="crt-wrap crt-text">
  <div class="crt-screen">

    <div id="splash" class="crt-text">
      <div class="splash-title">THE ARCHIVES</div>
      <div class="splash-sub">
        <img src="SnehArchives/Spl.png" alt="Logo" style="height:80px; image-rendering:pixelated;">
      </div>
    </div>

    <div id="lockscreen" class="crt-text">
      <div id="lockText">ENTER ACCESS PASSWORD:</div>
      <input id="lockInput" type="password" placeholder="Password">
      <button id="lockBtn">UNLOCK</button>
    </div>

    <button id="enterAdmin" style="position:fixed;top:12px;right:12px;padding:8px 12px;border-radius:6px;border:1px solid rgba(10,175,255,0.12);background:transparent;color:var(--crt-blue);font-weight:700;cursor:pointer">Admin</button>
    <button id="exportBtn">Download Updated HTML</button>

    <div class="viewport" id="viewport"></div>

    <div id="adminPanel">
      <div class="panel">
        <h3>Edit Bar</h3>
        <label>Title</label><input id="editTitle">
        <label>Password</label><input id="editPassword" type="password">
        <label>Protected Text</label><textarea id="editText" rows="4"></textarea>
        <button id="saveEdit" style="margin-top:10px;border:1px solid rgba(10,175,255,0.12);background:transparent;color:var(--crt-blue);padding:10px;border-radius:6px;cursor:pointer">Save</button>
        <button id="closeAdmin" style="margin-top:10px;border:1px solid rgba(10,175,255,0.12);background:transparent;color:var(--crt-blue);padding:10px;border-radius:6px;cursor:pointer">Cancel</button>
        <button id="addBar" style="margin-top:10px;border:1px solid rgba(10,175,255,0.12);background:transparent;color:var(--crt-blue);padding:10px;border-radius:6px;cursor:pointer">+ Add New Bar</button>
      </div>
    </div>

    <div class="noise"></div>
    <div class="crt-vignette"></div>
  </div>
</div>

<button id="downloadSite" style="display:none;position:fixed;bottom:20px;right:20px;padding:10px 16px;border:1px solid rgba(10,175,255,0.4);background:transparent;color:#0af;font-family:monospace;cursor:pointer;z-index:999999">Download Website</button>

<script>
const defaultBars=[
  {title:"1985",password:"1985pass",text:"Diary log content..."},
  {title:"The Archives",password:"archpass",text:"Archive content..."},
  {title:"The Clues",password:"cluepass",text:"Clues content..."}
];
let bars=[{"title":"\"Two Knights Chess\"","password":"AKSHAT","text":"Hello,\nBy now, you already know my name pretty well. I'am Akshat Chaudhary, and look, I do not care who you are, or what you want, all I care if you can get me what I want. See he, is someone I thought I could beat, but he is smarter than me, he's more clever than me, I can't get to him before he can get to me, and if you are reading this, he already has got to me. Ofcourse any given person may not be smarter or better, but at some point, someone with the right mind and intentions will come across this and finish what I started."},{"title":"The Archives","password":"AGAINST","text":"Hello,\nThis is conteng from my diaries. I wrote, hundreds of pages and I don't know how many were preserved but I told my friend to save as many as he could. At this moment, I'am paranoid and it may all be in my head, but I cannot take any risks. I would love to tell you everything I can but I cannot. If things are too easy, he will find out, he will alter and/or destroy what I leave behind and thus I must cipher my wordings so that they may be preserved. The Archives are though a safe haven. They are protected by both \"Pheonix\" and ANTI to give against X to give against... something I don't know."},{"title":"The Clues","password":"FRIEND","text":"You have been receiving the clues?\nIt is no surprise to me.\nI had given a bundle of them to my friend and told him to give them to whoever he wishes. My friend will not give you anything directly but to a third person who will give them to you, and this person my friend trusted so I suppose you can as well. But never trust anyone too much for that leads to decay, to wither to, demise."},{"title":"The Orphanage","password":"LOST","text":"One of the extracts I found on a paper in the orphanage, it reads as follows:\n\n\"...We have to keep guard almost the entire night and it is ravaging my sleep. I have been the one chosen every consecutive day since last week...\" \n\nKeep guard? Guard from what? And why children? What could be soo terrifying that these kids felt the need for one to stay awake all night on watch? And what about the adults? Did they see nothing?"},{"title":"The Sky","password":"CASSILDA","text":"ð“ð“µð“¸ð“·ð“° ð“½ð“±ð“® ð“¼ð“±ð“¸ð“»ð“® ð“½ð“±ð“® ð“¬ð“µð“¸ð“¾ð“­ ð”€ð“ªð“¿ð“®ð“¼ ð“«ð“»ð“®ð“ªð“´,\nð“£ð“±ð“® ð“½ð”€ð“²ð“· ð“¼ð“¾ð“·ð“¼ ð“¼ð“²ð“·ð“´ ð“«ð“®ð“±ð“²ð“·ð“­* ð“½ð“±ð“® ð“µð“ªð“´ð“®,\nð“£ð“±ð“® ð“¼ð“±ð“ªð“­ð“¸ð”€ð“¼ ð“µð“®ð“·ð“°ð“½ð“±ð“®ð“·\nð“˜ð“· ð“’ð“ªð“»ð“¬ð“¸ð“¼ð“ª.\n\nð“¢ð“½ð“»ð“ªð“·ð“°ð“® ð“²ð“¼ ð“½ð“±ð“® ð“·ð“²ð“°ð“±ð“½ ð”€ð“±ð“®ð“»ð“® ð“«ð“µð“ªð“¬ð“´ ð“¼ð“½ð“ªð“»ð“¼ ð“»ð“²ð“¼ð“®,\nð“ð“·ð“­ ð“¼ð“½ð“»ð“ªð“·ð“°ð“® ð“¶ð“¸ð“¸ð“·ð“¼ ð“¬ð“²ð“»ð“¬ð“µð“® ð“½ð“±ð“»ð“¸ð“¾ð“°ð“± ð“½ð“±ð“® ð“¼ð“´ð“²ð“®ð“¼\nð“‘ð“¾ð“½ ð“¼ð“½ð“»ð“ªð“·ð“°ð“®ð“» ð“¼ð“½ð“²ð“µð“µ ð“²ð“¼\nð“›ð“¸ð“¼ð“½ ð“’ð“ªð“»ð“¬ð“¸ð“¼ð“ª.\n\nð“¢ð“¸ð“·ð“°ð“¼ ð“½ð“±ð“ªð“½ ð“½ð“±ð“® ð“—ð”‚ð“ªð“­ð“®ð“¼ ð“¼ð“±ð“ªð“µð“µ ð“¼ð“²ð“·ð“°,\nð“¦ð“±ð“®ð“»ð“® ð“¯ð“µð“ªð“¹ ð“½ð“±ð“® ð“½ð“ªð“½ð“½ð“®ð“»ð“¼ ð“¸ð“¯ ð“½ð“±ð“® ð“šð“²ð“·ð“°,\nð“œð“¾ð“¼ð“½ ð“­ð“²ð“® ð“¾ð“·ð“±ð“®ð“ªð“»ð“­ ð“²ð“·\nð““ð“²ð“¶ ð“’ð“ªð“»ð“¬ð“¸ð“¼ð“ª.\n\nð“¢ð“¸ð“·ð“° ð“¸ð“¯ ð“¶ð”‚ ð“¼ð“¸ð“¾ð“µ, ð“¶ð”‚ ð“¿ð“¸ð“²ð“¬ð“® ð“²ð“¼ ð“­ð“®ð“ªð“­;\nð““ð“²ð“® ð“½ð“±ð“¸ð“¾, ð“¾ð“·ð“¼ð“¾ð“·ð“°, ð“ªð“¼ ð“½ð“®ð“ªð“»ð“¼ ð“¾ð“·ð“¼ð“±ð“®ð“­\nð“¢ð“±ð“ªð“µð“µ ð“­ð“»ð”‚ ð“ªð“·ð“­ ð“­ð“²ð“® ð“²ð“·\nð“›ð“¸ð“¼ð“½ ð“’ð“ªð“»ð“¬ð“¸ð“¼ð“ª.\n\nð’œð“ð‘œð“ƒð‘” ð“‰ð’½ð‘’ ð“ˆð’½ð‘œð“‡ð‘’ ð“‰ð’½ð‘’ ð’¸ð“ð‘œð“Šð’¹ ð“Œð’¶ð“‹ð‘’ð“ˆ ð’·ð“‡ð‘’ð’¶ð“€,\nð’¯ð’½ð‘’ ð“‰ð“Œð’¾ð“ƒ ð“ˆð“Šð“ƒð“ˆ ð“ˆð’¾ð“ƒð“€ ð’·ð‘’ð’½ð’¾ð“ƒð’¹* ð“‰ð’½ð‘’ ð“ð’¶ð“€ð‘’,\nð’¯ð’½ð‘’ ð“ˆð’½ð’¶ð’¹ð‘œð“Œð“ˆ ð“ð‘’ð“ƒð‘”ð“‰ð’½ð‘’ð“ƒ\nð¼ð“ƒ ð’žð’¶ð“‡ð’¸ð‘œð“ˆð’¶.\nð’®ð“‰ð“‡ð’¶ð“ƒð‘”ð‘’ ð’¾ð“ˆ ð“‰ð’½ð‘’ ð“ƒð’¾ð‘”ð’½ð“‰ ð“Œð’½ð‘’ð“‡ð‘’ ð’·ð“ð’¶ð’¸ð“€ ð“ˆð“‰ð’¶ð“‡ð“ˆ ð“‡ð’¾ð“ˆð‘’,\nð’œð“ƒð’¹ ð“ˆð“‰ð“‡ð’¶ð“ƒð‘”ð‘’ ð“‚ð‘œð‘œð“ƒð“ˆ ð’¸ð’¾ð“‡ð’¸ð“ð‘’ ð“‰ð’½ð“‡ð‘œð“Šð‘”ð’½ ð“‰ð’½ð‘’ ð“ˆð“€ð’¾ð‘’ð“ˆ\nðµð“Šð“‰ ð“ˆð“‰ð“‡ð’¶ð“ƒð‘”ð‘’ð“‡ ð“ˆð“‰ð’¾ð“ð“ ð’¾ð“ˆ\nð¿ð‘œð“ˆð“‰ ð’žð’¶ð“‡ð’¸ð‘œð“ˆð’¶.\nð’®ð‘œð“ƒð‘”ð“ˆ ð“‰ð’½ð’¶ð“‰ ð“‰ð’½ð‘’ ð»ð“Žð’¶ð’¹ð‘’ð“ˆ ð“ˆð’½ð’¶ð“ð“ ð“ˆð’¾ð“ƒð‘”,\nð’²ð’½ð‘’ð“‡ð‘’ ð’»ð“ð’¶ð“… ð“‰ð’½ð‘’ ð“‰ð’¶ð“‰ð“‰ð‘’ð“‡ð“ˆ ð‘œð’» ð“‰ð’½ð‘’ ð’¦ð’¾ð“ƒð‘”,\nð‘€ð“Šð“ˆð“‰ ð’¹ð’¾ð‘’ ð“Šð“ƒð’½ð‘’ð’¶ð“‡ð’¹ ð’¾ð“ƒ\nð’Ÿð’¾ð“‚ ð’žð’¶ð“‡ð’¸ð‘œð“ˆð’¶.\n\nð’®ð‘œð“ƒð‘” ð‘œð’» ð“‚ð“Ž ð“ˆð‘œð“Šð“, ð“‚ð“Ž ð“‹ð‘œð’¾ð’¸ð‘’ ð’¾ð“ˆ ð’¹ð‘’ð’¶ð’¹;\nð’Ÿð’¾ð‘’ ð“‰ð’½ð‘œð“Š, ð“Šð“ƒð“ˆð“Šð“ƒð‘”, ð’¶ð“ˆ ð“‰ð‘’ð’¶ð“‡ð“ˆ ð“Šð“ƒð“ˆð’½ð‘’ð’¹\nð’®ð’½ð’¶ð“ð“ ð’¹ð“‡ð“Ž ð’¶ð“ƒð’¹ ð’¹ð’¾ð‘’ ð’¾ð“ƒ\nð¿ð‘œð“ˆð“‰ ð’žð’¶ð“‡ð’¸ð‘œð“ˆð’¶."},{"title":"The Game","password":"DND","text":"Strenght is be able to do.\nDexterity is to dodge.\nConstitution is to do dispite.\nIntelligence is knowledge.\nWisdom knowing when knowledge ends.\nCharisma is the art of humans."},{"title":"Kara","password":"BIRD","text":"Fear. \nHatred.\nThat's the only things I have heard.\nKara is not this persons actual name.\nYour not an idiot, you didn't think Kara was their real name right? As time has gone on, I have seen Kara is now only known by me. The newer batches do not know what happened. You might've also realised the story is set in 1986 but I write letters from 1985? \n\nKara.\nKarma.\nThe symbol of ying and yang.\nFear the symbol of it.\nIt will be red herring.\n"},{"title":"The Constellations","password":"","text":"RUNRUNRUNRUNRUNRUNRUNRUNRUNRUNRUNRUNRUNRUNRUNRUNRUNRINRINTUNRURNEIRNRURNENEJEJENEMEKEJEJENENNEMEEMEMEJEJJRJENENENEJENENEBRBENENEJEJWUWHHWHWHEBEBEBEBENENEJWJWJWJWJWJJWHWHWVW W  W      WBQHWH W WNENHER  FNCH   D S D D  FBF F F F F  F F F        "}];

async function sha256hex(msg){
  const data=new TextEncoder().encode(msg);
  const hash=await crypto.subtle.digest('SHA-256',data);
  return Array.from(new Uint8Array(hash)).map(b=>b.toString(16).padStart(2,'0')).join('');
}

async function render(){
  const viewport=document.getElementById('viewport');
  viewport.innerHTML='';
  for(let i=0;i<bars.length;i++){
    const bar=document.createElement('section');
    const content=document.createElement('div');
    content.className='bar crt-text';
    const hash=await sha256hex(bars[i].password);
    content.innerHTML = `
      <h2>${bars[i].title} <span class="locked-badge">Locked</span></h2>
      <div class="controls">
        <input type="password" placeholder="Enter password" class="pw-input" />
        <button class="pw-btn">Unlock</button>
      </div>
      <div class="protected-text">${bars[i].text}</div>
      <button class="edit-btn">Edit</button>
    `;
    const input=content.querySelector('.pw-input');
    const btn=content.querySelector('.pw-btn');
    const text=content.querySelector('.protected-text');
    const badge=content.querySelector('.locked-badge');
    btn.onclick = async ()=>{
      if(await sha256hex(input.value) === hash){
        text.classList.add('unlocked');
        badge.textContent='Unlocked';
      }
    };
    content.querySelector('.edit-btn').onclick = ()=>openAdmin(i);
    bar.appendChild(content);
    viewport.appendChild(bar);
  }
}
render();

let adminUnlocked=false;
document.getElementById('enterAdmin').onclick = ()=>{
  const pw=prompt('Enter admin password:');
  if(pw === 'admin123'){
    adminUnlocked=true;
    document.getElementById('exportBtn').style.display='block';
    document.getElementById('downloadSite').style.display='block';
    alert('Admin mode enabled.');
  } else alert('Wrong password.');
};

let editIndex=null;
function openAdmin(i){
  if(!adminUnlocked){alert('Admin mode locked.');return;}
  editIndex=i;
  document.getElementById('editTitle').value=bars[i].title;
  document.getElementById('editPassword').value=bars[i].password;
  document.getElementById('editText').value=bars[i].text;
  document.getElementById('adminPanel').style.display='flex';
}
document.getElementById('closeAdmin').onclick = ()=>{document.getElementById('adminPanel').style.display='none'}
document.getElementById('saveEdit').onclick = ()=>{
  bars[editIndex].title=document.getElementById('editTitle').value;
  bars[editIndex].password=document.getElementById('editPassword').value;
  bars[editIndex].text=document.getElementById('editText').value;
  localStorage.setItem('bars-data', JSON.stringify(bars));
  document.getElementById('adminPanel').style.display='none';
  render();
}

// Add new bar
document.getElementById('addBar').onclick = ()=>{
  bars.push({title:"New Bar", password:"", text:""});
  localStorage.setItem('bars-data', JSON.stringify(bars));
  render();
  editIndex = bars.length - 1;
  openAdmin(editIndex);
}

// Export button already works
document.getElementById('exportBtn').onclick = ()=>{
  fetch(window.location.href).then(r=>r.text()).then(origHTML=>{
    const newBarsJSON = JSON.stringify(bars);
    const updatedHTML = origHTML.replace(
      /let bars=JSON\.parse\(localStorage\.getItem\('bars-data'\)\|\|'null'\)\|\|defaultBars;/,
      `let bars=${newBarsJSON};`
    );
    const blob = new Blob([updatedHTML], { type: 'text/html' });
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'updated-crt.html';
    a.click();
  });
}

// Lock screen
const lockBtn=document.getElementById('lockBtn');
lockBtn.onclick = ()=>{
  const pw=document.getElementById('lockInput').value;
  if(pw === 'ANTIX238'){
    document.getElementById('lockscreen').style.display='none';
    document.getElementById('splash').style.display='none';
    document.getElementById('viewport').style.display='block';
  } else alert('Incorrect password');
}

setTimeout(()=>{
  document.getElementById('splash').style.display='none';
  document.getElementById('lockscreen').style.display='flex';
},1000);

// FIXED Download Website button to include current edits
const dlBtn = document.getElementById('downloadSite');
dlBtn.onclick = () => {
  fetch(window.location.href).then(r => r.text()).then(origHTML => {
    const newBarsJSON = JSON.stringify(bars);
    const updatedHTML = origHTML.replace(
      /let bars=JSON\.parse\(localStorage\.getItem\('bars-data'\)\|\|'null'\)\|\|defaultBars;/,
      `let bars=${newBarsJSON};`
    );
    const blob = new Blob([updatedHTML], { type: 'text/html' });
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'website.html';
    a.click();
  });
};
</script>
</body>
</html>
